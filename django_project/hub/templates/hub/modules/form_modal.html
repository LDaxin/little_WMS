<div class="modal fade" id="add{{ name }}" tabindex="-1" aria-labelledby="add{{name}}" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title" id="addLocationLabel">{{ title }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">

                <form method="POST" action="./add" id="addForm">
                    {% csrf_token %}

                    {% for p_form in form %}
                        {% for field in p_form %}
                        
                        {% for f in l %}
                        {% if field.name == f %}
                            <div class="form-floating mb-2">
                                {{ field.error }}
                                {{ field }}
                                <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
                            </div>
                        {% endif %}
                        {% endfor %}

                        {% if not typ %}
                            <div class="form-floating mb-2">
                                {{ field.error }}
                                {{ field }}
                                <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
                            </div>
                            {% endif %}
                        {% endfor %}
                    {% endfor %}
                    <button type="submit" class="btn btn-success" id="addButton" data-bs-dismiss="modal" >Add</button>
                </form>

            </div>
        </div>
    </div>
</div>


<script>
    $("#addButton").on("click", function(){
        $("#addForm").submit(function(e){
            e.preventDefault();
            e.stopImmediatePropagation();

            var form = $(this);
            var actionUrl = form.attr('action');
    
            $.ajax({
                type: "POST",
                url: actionUrl,
                data: form.serialize(), // serializes the form's elements.
                success: function(data)
                {
                    lResults($('#{{searchFieldName}}').val());
                    $(".toast-container").append(data);

                }
            });

            return false;
        });
    });
</script>
